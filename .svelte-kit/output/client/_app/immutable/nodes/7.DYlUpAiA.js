import{c as je,l as Me}from"../chunks/Cexvm7jw.js";import{C as Ie,p as Fe,D as R,E as D,G as Ne,H as Re,h as De,a as l,b as i,d as Ee,$ as He,e,w as c,f as G,r as a,n as v,g as s,I as E,k as n,t as m,c as Ve,J as H,i as Y,j as h,K as At,L as ee,F as g,l as S,M as zt,N as tt}from"../chunks/CHEZFaFW.js";import{a as $}from"../chunks/4_OcRqll.js";import{i as ae}from"../chunks/V_zUl8LG.js";import{e as Le,i as Je}from"../chunks/BcIZtQ9e.js";import{s as St,b as se}from"../chunks/ClU6btJJ.js";import{l as oe}from"../chunks/CWob9Ii1.js";import{C as re,c as ne,a as Ze,b as Ue}from"../chunks/D1JuUFOb.js";import{B as A}from"../chunks/2cE2B43Z.js";import{B as _}from"../chunks/BLuEq0UL.js";import{I as qe}from"../chunks/BAO5Xq7u.js";t[g]="src/routes/admin/tenants/+page.svelte";var Ge=$(S('<meta name="description" content="Manage all tenant accounts on the Verdict 360 platform."/>'),t[g],[[90,2]]),Ke=$(zt('<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> Back to Dashboard',1),t[g],[[104,12,[[105,14]]]]),Oe=$(zt('<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"></path></svg> Add Tenant',1),t[g],[[110,12,[[111,14]]]]),Qe=$(zt('<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Refresh',1),t[g],[[176,14,[[177,16]]]]),We=$(S('<div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div><label for="search" class="block text-sm font-medium text-gray-700 mb-1">Search</label> <!></div> <div><label for="status" class="block text-sm font-medium text-gray-700 mb-1">Status</label> <select id="status" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><option>All Status</option><option>Active</option><option>Inactive</option><option>Suspended</option><option>Trial</option></select></div> <div><label for="plan" class="block text-sm font-medium text-gray-700 mb-1">Plan</label> <select id="plan" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><option>All Plans</option><option>Starter</option><option>Professional</option><option>Enterprise</option></select></div> <div class="flex items-end"><!></div></div>'),t[g],[[124,8,[[125,10,[[126,12]]],[139,10,[[140,12],[143,12,[[149,14],[150,14],[151,14],[152,14],[153,14]]]]],[157,10,[[158,12],[161,12,[[167,14],[168,14],[169,14],[170,14]]]]],[174,10]]]]),Xe=$(S('<div class="flex justify-center items-center py-12"><svg class="animate-spin h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>'),t[g],[[193,10,[[194,12,[[195,14],[196,14]]]]]]),Ye=$(S('<tr><td colspan="8" class="text-center py-12 text-gray-500">No tenants found</td></tr>'),t[g],[[216,18,[[217,20]]]]),ta=$(S('<tr class="border-b hover:bg-gray-50"><td class="py-3 px-4"><div><div class="font-medium"> </div> <div class="text-sm text-gray-500"> </div></div></td><td class="py-3 px-4"><div class="text-sm"><div> </div> <div class="text-gray-500"> </div></div></td><td class="py-3 px-4"><!></td><td class="py-3 px-4"><!></td><td class="py-3 px-4"> </td><td class="py-3 px-4 font-medium"> </td><td class="py-3 px-4 text-sm text-gray-600"> </td><td class="py-3 px-4"><div class="flex space-x-2"><!> <!></div></td></tr>'),t[g],[[327,18,[[328,20,[[329,22,[[330,24],[331,24]]]]],[334,20,[[335,22,[[336,24],[337,24]]]]],[340,20],[343,20],[348,20],[349,20],[350,20],[351,20,[[352,22]]]]]]),ea=$(S('<div class="overflow-x-auto"><table class="w-full"><thead><tr class="border-b"><th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Firm Name</th><th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Contact</th><th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Plan</th><th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Status</th><th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Users</th><th class="text-left py-3 px-4 text-sm font-medium text-gray-700">MRR</th><th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Created</th><th class="text-left py-3 px-4 text-sm font-medium text-gray-700">Actions</th></tr></thead><tbody><!><tr class="border-b hover:bg-gray-50"><td class="py-3 px-4"><div><div class="font-medium">Smith & Associates</div> <div class="text-sm text-gray-500">smith.verdict360.com</div></div></td><td class="py-3 px-4"><div class="text-sm"><div>john@smithlaw.co.za</div> <div class="text-gray-500">+27 11 234 5678</div></div></td><td class="py-3 px-4"><!></td><td class="py-3 px-4"><!></td><td class="py-3 px-4">8</td><td class="py-3 px-4 font-medium">R7,999</td><td class="py-3 px-4 text-sm text-gray-600">Dec 01, 2024</td><td class="py-3 px-4"><div class="flex space-x-2"><!> <!></div></td></tr><tr class="border-b hover:bg-gray-50"><td class="py-3 px-4"><div><div class="font-medium">Cape Town Legal</div> <div class="text-sm text-gray-500">capetown.verdict360.com</div></div></td><td class="py-3 px-4"><div class="text-sm"><div>info@ctlegal.co.za</div> <div class="text-gray-500">+27 21 456 7890</div></div></td><td class="py-3 px-4"><!></td><td class="py-3 px-4"><!></td><td class="py-3 px-4">3</td><td class="py-3 px-4 font-medium">R0</td><td class="py-3 px-4 text-sm text-gray-600">Dec 10, 2024</td><td class="py-3 px-4"><div class="flex space-x-2"><!> <!></div></td></tr><tr class="border-b hover:bg-gray-50"><td class="py-3 px-4"><div><div class="font-medium">Johannesburg Associates</div> <div class="text-sm text-gray-500">jhb.verdict360.com</div></div></td><td class="py-3 px-4"><div class="text-sm"><div>admin@jhblaw.co.za</div> <div class="text-gray-500">+27 11 987 6543</div></div></td><td class="py-3 px-4"><!></td><td class="py-3 px-4"><!></td><td class="py-3 px-4">25</td><td class="py-3 px-4 font-medium">R24,999</td><td class="py-3 px-4 text-sm text-gray-600">Nov 15, 2024</td><td class="py-3 px-4"><div class="flex space-x-2"><!> <!></div></td></tr><!></tbody></table></div> <div class="flex justify-between items-center mt-6"><div class="text-sm text-gray-600"> </div> <div class="flex space-x-2"><!> <!></div></div>',1),t[g],[[200,10,[[201,12,[[202,14,[[203,16,[[204,18],[205,18],[206,18],[207,18],[208,18],[209,18],[210,18],[211,18]]]]],[214,14,[[224,16,[[225,18,[[226,20,[[227,22],[228,22]]]]],[231,18,[[232,20,[[233,22],[234,22]]]]],[237,18],[240,18],[243,18],[244,18],[245,18],[246,18,[[247,20]]]]],[258,16,[[259,18,[[260,20,[[261,22],[262,22]]]]],[265,18,[[266,20,[[267,22],[268,22]]]]],[271,18],[274,18],[277,18],[278,18],[279,18],[280,18,[[281,20]]]]],[292,16,[[293,18,[[294,20,[[295,22],[296,22]]]]],[299,18,[[300,20,[[301,22],[302,22]]]]],[305,18],[308,18],[311,18],[312,18],[313,18],[314,18,[[315,20]]]]]]]]]]],[368,10,[[369,12],[372,12]]]]),aa=$(S("<!> <!>",1),t[g],[]),sa=$(S('<div class="min-h-screen bg-gray-50"><header class="bg-white shadow-sm border-b"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center py-4"><div><h1 class="text-2xl font-bold text-gray-900">Tenant Management</h1> <p class="text-sm text-gray-600">Manage all law firms on the platform</p></div> <div class="flex items-center space-x-4"><!> <!></div></div></div></header> <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!> <!></main></div>'),t[g],[[93,0,[[95,2,[[96,4,[[97,6,[[98,8,[[99,10],[100,10]]],[102,8]]]]]]],[120,2]]]]);function t(le,ie){je(new.target),Fe(ie,!0,t);let at=R(D(Ne([])),"tenants"),st=R(D(!0),"loading"),ot=R(D(""),"searchTerm"),rt=R(D("all"),"statusFilter"),nt=R(D("all"),"planFilter"),V=R(D(1),"currentPage"),lt=R(D(1),"totalPages");Re(async()=>{(await tt(P()))()});async function P(){E(st,!0);try{const p=localStorage.getItem("accessToken"),b=new URLSearchParams({page:n(V).toString(),search:n(ot),status:n(rt),plan:n(nt)}),u=(await tt(fetch(`/api/admin/tenants?${b}`,{headers:{Authorization:`Bearer ${p}`}})))();if(u.ok){const x=(await tt(u.json()))();E(at,x.tenants||[],!0),E(lt,x.totalPages||1,!0)}}catch(p){console.error(...oe("error","Error fetching tenants:",p))}finally{E(st,!1)}}async function it(p,b){const u=H(b,"active")?"suspended":"active",x=localStorage.getItem("accessToken");try{(await tt(fetch(`/api/admin/tenants/${p}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({status:u})})))().ok&&(await tt(P()))()}catch(f){console.error(...oe("error","Error updating tenant status:",f))}}function de(p){return new Date(p).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})}function ce(p){return new Intl.NumberFormat("en-ZA",{style:"currency",currency:"ZAR"}).format(p)}var dt=sa();De(p=>{var b=Ge();He.title="Manage Tenants - Verdict 360 Admin",i(p,b)});var ct=e(dt),jt=e(ct),Mt=e(jt),It=s(e(Mt),2),Ft=e(It);l(()=>_(Ft,{variant:"outline",onclick:()=>window.location.href="/admin",children:c(t,(p,b)=>{var u=Ke(),x=G(u),f=e(x);St(f,"stroke-width",2),a(x),v(),i(p,u)}),$$slots:{default:!0}}),"component",t,103,10,{componentTag:"Button"});var ve=s(Ft,2);l(()=>_(ve,{variant:"default",onclick:()=>window.location.href="/admin/tenants/new",children:c(t,(p,b)=>{var u=Oe(),x=G(u),f=e(x);St(f,"stroke-width",2),a(x),v(),i(p,u)}),$$slots:{default:!0}}),"component",t,109,10,{componentTag:"Button"}),a(It),a(Mt),a(jt),a(ct);var Nt=s(ct,2),Rt=e(Nt);l(()=>re(Rt,{class:"mb-6",children:c(t,(p,b)=>{l(()=>ne(p,{class:"py-4",children:c(t,(u,x)=>{var f=We(),z=e(f),vt=s(e(z),2);l(()=>qe(vt,{type:"text",id:"search",placeholder:"Search by name or email...",onchange:P,class:"w-full",get value(){return n(ot)},set value(w){E(ot,w,!0)}}),"component",t,129,12,{componentTag:"Input"}),a(z);var k=s(z,2),j=s(e(k),2);j.__change=P;var M=e(j);M.value=M.__value="all";var K=s(M);K.value=K.__value="active";var y=s(K);y.value=y.__value="inactive";var B=s(y);B.value=B.__value="suspended";var L=s(B);L.value=L.__value="trial",a(j),a(k);var J=s(k,2),I=s(e(J),2);I.__change=P;var Z=e(I);Z.value=Z.__value="all";var O=s(Z);O.value=O.__value="starter";var F=s(O);F.value=F.__value="professional";var U=s(F);U.value=U.__value="enterprise",a(I),a(J);var et=s(J,2),Q=e(et);l(()=>_(Q,{variant:"outline",onclick:P,class:"w-full",children:c(t,(w,pt)=>{var W=Qe(),X=G(W),mt=e(X);St(mt,"stroke-width",2),a(X),v(),i(w,W)}),$$slots:{default:!0}}),"component",t,175,12,{componentTag:"Button"}),a(et),a(f),se(j,()=>n(rt),w=>E(rt,w)),se(I,()=>n(nt),w=>E(nt,w)),i(u,f)}),$$slots:{default:!0}}),"component",t,123,6,{componentTag:"CardContent"})}),$$slots:{default:!0}}),"component",t,122,4,{componentTag:"Card"});var pe=s(Rt,2);return l(()=>re(pe,{children:c(t,(p,b)=>{var u=aa(),x=G(u);l(()=>Ze(x,{children:c(t,(z,vt)=>{l(()=>Ue(z,{children:c(t,(k,j)=>{v();var M=m("All Tenants");i(k,M)}),$$slots:{default:!0}}),"component",t,189,8,{componentTag:"CardTitle"})}),$$slots:{default:!0}}),"component",t,188,6,{componentTag:"CardHeader"});var f=s(x,2);l(()=>ne(f,{children:c(t,(z,vt)=>{var k=Ve(),j=G(k);{var M=y=>{var B=Xe();i(y,B)},K=y=>{var B=ea(),L=G(B),J=e(L),I=s(e(J)),Z=e(I);{var O=o=>{var r=Ye();i(o,r)};l(()=>ae(Z,o=>{H(n(at).length,0)&&o(O)}),"if",t,215,16)}var F=s(Z),U=s(e(F),2),et=e(U);l(()=>A(et,{variant:"default",children:c(t,(o,r)=>{v();var d=m("Professional");i(o,d)}),$$slots:{default:!0}}),"component",t,238,20,{componentTag:"Badge"}),a(U);var Q=s(U),w=e(Q);l(()=>A(w,{variant:"success",children:c(t,(o,r)=>{v();var d=m("Active");i(o,d)}),$$slots:{default:!0}}),"component",t,241,20,{componentTag:"Badge"}),a(Q);var pt=s(Q,4),W=e(pt),X=e(W);l(()=>_(X,{size:"sm",variant:"outline",onclick:()=>window.location.href="/admin/tenants/smith",children:c(t,(o,r)=>{v();var d=m("View");i(o,d)}),$$slots:{default:!0}}),"component",t,248,22,{componentTag:"Button"});var mt=s(X,2);l(()=>_(mt,{size:"sm",variant:"outline",onclick:()=>it("smith","active"),children:c(t,(o,r)=>{v();var d=m("Suspend");i(o,d)}),$$slots:{default:!0}}),"component",t,251,22,{componentTag:"Button"}),a(W),a(pt),a(F);var ut=s(F),xt=s(e(ut),2),me=e(xt);l(()=>A(me,{variant:"default",children:c(t,(o,r)=>{v();var d=m("Starter");i(o,d)}),$$slots:{default:!0}}),"component",t,272,20,{componentTag:"Badge"}),a(xt);var _t=s(xt),ue=e(_t);l(()=>A(ue,{variant:"warning",children:c(t,(o,r)=>{v();var d=m("Trial");i(o,d)}),$$slots:{default:!0}}),"component",t,275,20,{componentTag:"Badge"}),a(_t);var Dt=s(_t,4),Et=e(Dt),Ht=e(Et);l(()=>_(Ht,{size:"sm",variant:"outline",onclick:()=>window.location.href="/admin/tenants/capetown",children:c(t,(o,r)=>{v();var d=m("View");i(o,d)}),$$slots:{default:!0}}),"component",t,282,22,{componentTag:"Button"});var xe=s(Ht,2);l(()=>_(xe,{size:"sm",variant:"default",children:c(t,(o,r)=>{v();var d=m("Convert");i(o,d)}),$$slots:{default:!0}}),"component",t,285,22,{componentTag:"Button"}),a(Et),a(Dt),a(ut);var ft=s(ut),gt=s(e(ft),2),_e=e(gt);l(()=>A(_e,{variant:"default",children:c(t,(o,r)=>{v();var d=m("Enterprise");i(o,d)}),$$slots:{default:!0}}),"component",t,306,20,{componentTag:"Badge"}),a(gt);var ht=s(gt),fe=e(ht);l(()=>A(fe,{variant:"success",children:c(t,(o,r)=>{v();var d=m("Active");i(o,d)}),$$slots:{default:!0}}),"component",t,309,20,{componentTag:"Badge"}),a(ht);var Vt=s(ht,4),Lt=e(Vt),Jt=e(Lt);l(()=>_(Jt,{size:"sm",variant:"outline",onclick:()=>window.location.href="/admin/tenants/jhb",children:c(t,(o,r)=>{v();var d=m("View");i(o,d)}),$$slots:{default:!0}}),"component",t,316,22,{componentTag:"Button"});var ge=s(Jt,2);l(()=>_(ge,{size:"sm",variant:"outline",onclick:()=>it("jhb","active"),children:c(t,(o,r)=>{v();var d=m("Suspend");i(o,d)}),$$slots:{default:!0}}),"component",t,319,22,{componentTag:"Button"}),a(Lt),a(Vt),a(ft);var he=s(ft);l(()=>Le(he,17,()=>n(at),Je,(o,r)=>{var d=ta(),N=e(d),Gt=e(N),yt=e(Gt),be=e(yt,!0);a(yt);var Kt=s(yt,2),we=e(Kt);a(Kt),a(Gt),a(N);var bt=s(N),Ot=e(bt),wt=e(Ot),Te=e(wt,!0);a(wt);var Qt=s(wt,2),Pe=e(Qt,!0);a(Qt),a(Ot),a(bt);var Tt=s(bt),ke=e(Tt);l(()=>A(ke,{variant:"default",children:c(t,(T,q)=>{v();var C=m();Y(()=>h(C,n(r).plan)),i(T,C)}),$$slots:{default:!0}}),"component",t,341,22,{componentTag:"Badge"}),a(Tt);var Pt=s(Tt),Be=e(Pt);{let T=At(()=>H(n(r).status,"active")?"success":H(n(r).status,"trial")?"warning":"secondary");l(()=>A(Be,{get variant(){return n(T)},children:c(t,(q,C)=>{v();var te=m();Y(()=>h(te,n(r).status)),i(q,te)}),$$slots:{default:!0}}),"component",t,344,22,{componentTag:"Badge"})}a(Pt);var kt=s(Pt),Ce=e(kt,!0);a(kt);var Bt=s(kt),Ae=e(Bt,!0);a(Bt);var Ct=s(Bt),Se=e(Ct,!0);a(Ct);var Wt=s(Ct),Xt=e(Wt),Yt=e(Xt);l(()=>_(Yt,{size:"sm",variant:"outline",onclick:()=>window.location.href=`/admin/tenants/${n(r).id}`,children:c(t,(T,q)=>{v();var C=m("View");i(T,C)}),$$slots:{default:!0}}),"component",t,353,24,{componentTag:"Button"});var ze=s(Yt,2);l(()=>_(ze,{size:"sm",variant:"outline",onclick:()=>it(n(r).id,n(r).status),children:c(t,(T,q)=>{v();var C=m();Y(()=>h(C,H(n(r).status,"active")?"Suspend":"Activate")),i(T,C)}),$$slots:{default:!0}}),"component",t,356,24,{componentTag:"Button"}),a(Xt),a(Wt),a(d),Y((T,q)=>{h(be,n(r).name),h(we,`${n(r).subdomain??""}.verdict360.com`),h(Te,n(r).email),h(Pe,n(r).phone),h(Ce,n(r).userCount),h(Ae,T),h(Se,q)},[()=>ce(n(r).mrr),()=>de(n(r).createdAt)]),i(o,d)}),"each",t,326,16),a(I),a(J),a(L);var Zt=s(L,2),$t=e(Zt),$e=e($t);a($t);var Ut=s($t,2),qt=e(Ut);{let o=At(()=>H(n(V),1));l(()=>_(qt,{variant:"outline",size:"sm",get disabled(){return n(o)},onclick:()=>{ee(V,-1),P()},children:c(t,(r,d)=>{v();var N=m("Previous");i(r,N)}),$$slots:{default:!0}}),"component",t,373,14,{componentTag:"Button"})}var ye=s(qt,2);{let o=At(()=>H(n(V),n(lt)));l(()=>_(ye,{variant:"outline",size:"sm",get disabled(){return n(o)},onclick:()=>{ee(V),P()},children:c(t,(r,d)=>{v();var N=m("Next");i(r,N)}),$$slots:{default:!0}}),"component",t,381,14,{componentTag:"Button"})}a(Ut),a(Zt),Y(()=>h($e,`Page ${n(V)??""} of ${n(lt)??""}`)),i(y,B)};l(()=>ae(j,y=>{n(st)?y(M):y(K,!1)}),"if",t,192,8)}i(z,k)}),$$slots:{default:!0}}),"component",t,191,6,{componentTag:"CardContent"}),i(p,u)}),$$slots:{default:!0}}),"component",t,187,4,{componentTag:"Card"}),a(Nt),a(dt),i(le,dt),Ee({...Me()})}Ie(["change"]);export{t as component};
